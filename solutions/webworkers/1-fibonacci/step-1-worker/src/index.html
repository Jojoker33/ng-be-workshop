<!DOCTYPE html>
<html>
  <head>
    <title>NG-BE Fibonacci WebWorkers</title>
  </head>
  <body>
    <div>
      fib(<input id="input" type="number" style="width: 50px" />) =
      <span id="result">??</span>
    </div>

    <button id="calculate">Calculate</button>

    <div id="counter" style="text-align: right">1</div>

    <script type="module">
      import { fibonacci } from './fibonacci.mjs';

      const inputEl = document.getElementById('input');
      const resultEl = document.getElementById('result');
      const counterEl = document.getElementById('counter');
      const calculateEl = document.getElementById('calculate');

      calculateEl.addEventListener('click', async () => {
        try {
          resultEl.innerHTML = '??';

          resultEl.innerHTML = await fibonacci(inputEl.valueAsNumber);
        } catch (error) {
          resultEl.innerHTML = error.message;
        }
      });

      let counter = 2;

      setInterval(() => {
        counterEl.innerHTML = counter++;
      }, 1000);
    </script>
  </body>
</html>
